[
  {
    "objectID": "reactive-side-effects.html",
    "href": "reactive-side-effects.html",
    "title": "Reactive Side Effects",
    "section": "",
    "text": "In the last section we learned about reactivity and reactive caluaitons. In general your default behaviour when developing Shiny apps is to not worry about when your calculations will be run in response to a users actions. Most of the time Shiny will infer the optimal render behaviour when you call inputs or reactive calculations in your code. There are, however, cases where you do want to intervene and tell Shiny when a piece of code should run, and the @reactive.Effect and @reactive.event decorators allow you to do this.\nConsider this application which opens and closes a model. There’s an input button which the user can click which opens a modal window, and clicking outside of that window closes it. How would you accomplish this behaviour using the Shiny tools you know so far?\n#| standalone: true\n#| components: [viewer]\n#| layout: horizontal\n#| viewerHeight: 400\nfrom shiny import App, Inputs, Outputs, Session, reactive, ui, render\n\napp_ui = ui.page_fluid(\n    ui.input_action_button(\"show\", \"Show modal dialog\"), ui.output_text(\"txt\")\n)\n\n\ndef server(input: Inputs, output: Outputs, session: Session):\n    @reactive.Effect\n    @reactive.event(input.show)\n    def show_modal():\n        m = ui.modal(\n            \"This is a somewhat important message.\",\n            title=\"Click outside the modal to close\",\n            easy_close=True,\n            footer=None,\n        )\n        ui.modal_show(m)\n\n\napp = App(app_ui, server)\n\nThis interaction is hard to incorporate into a basic reactive framework because the button doesn’t really have value in the same way that other inputs do. When you change a numeric input or a slider, you’re modifying the value and Shiny can invalidate things based on that change. When the user clicks the button in this app, we are usually intersted in the side effect of that action. We’re not doing something with the value of the button, we just want the action to trigger some other behaviour.\nTo implement behaviour like this we define a function which contains the effect logic, and use the @reactive.Effect and @reactive.event to identify it as an effect. The @reactive.Effect decorator tells Shiny that the function is called for its side effect and that it shouldn’t be called directly. The best way to indentify which inputs should trigger the effect is by identifying it with @reactive.event. Unlike output functions or reactive calculations, the name of the function does not matter. You can either use an informative name or def _(): to name the function.\n\n\n\n\n\n\nWarning\n\n\n\nSince we’re not using the value of input.show in @reactive.event we refer to the object (input.show) rather than calling it as we would in a reactive (input.show()).\n\n\n1@reactive.Effect\n2@reactive.event(input.show)\ndef toggle_modal():\n    m = ui.modal(\n        \"This is a somewhat important message.\",\n        title=\"Click outside the modal to close\",\n        easy_close=True,\n        footer=None,\n    )\n    ui.modal_show(m)\n\n1\n\nIdentify that this is a reactive effect called for its side effects\n\n2\n\nDefine which inputs should trigger the effect.\n\n\nThe distinction between values and side effects is crucial for using Shiny effectively because it determines which pattern you should use. You should use reactive.Calc when you want the value of a function, and reactive.Effect when you want a side effect. New Shiny developers often make the mistake of using one of these patterns for their entire application, and create needless complexity in their application. It’s a mistake to use reactive.Effect when you’re after the value of a function, and it’s a mistake to try to use reactive.Calc when you want a side effect. This short quiz can help develop an intuition about this distinction:\n\nQuiz 3.0: Values and side effects\n\n\n\n\n\n\nTest your understanding\n\n\n\n#| standalone: true\n#| components: [viewer]\n#| layout: horizontal\n#| viewerHeight: 250\nfrom shiny import App, render, ui, reactive, req\nimport json\nfrom pathlib import Path\n\nwith open(Path(__file__).parent / \"questions.json\", \"r\") as file:\n    questions = json.load(file)\n\napp_ui = ui.page_fluid(ui.output_ui(\"question\"), ui.output_ui(\"validation\"))\n\n\ndef server(input, output, session):\n    q_num = reactive.Value(0)\n\n    question_keys = list(questions.keys())\n\n    @reactive.Calc\n    def current_q():\n        return questions[question_keys[q_num()]]\n\n    @output\n    @render.ui\n    def question():\n        return ui.div(\n            ui.h5(question_keys[q_num()], style=\"margin-bottom: 20px\"),\n            ui.input_radio_buttons(\n                \"question\",\n                \"\",\n                choices=current_q()[\"choices\"],\n                selected=\"\",\n            ),\n        )\n\n    @output\n    @render.ui\n    def validation():\n        req(input.question())\n        if input.question() == current_q()[\"answer\"]:\n            if q_num() == len(question_keys) - 1:\n                return ui.p(\"Correct! Quiz complete.\")\n            else:\n                return ui.div(\n                    ui.p(\"Correct!\"), ui.input_action_button(\"next\", \"Next Question\")\n                )\n        return ui.p(\"Not quite right, try again\")\n\n    @reactive.Effect\n    @reactive.event(input.next)\n    def next_question():\n        q_num.set(q_num.get() + 1)\n\n\napp = App(app_ui, server)\n\n## file: questions.json\n{\"Writing a CSV\": {\"choices\": [\"value\", \"side effect\"], \"answer\": \"side effect\"}, \"Querying a database\": {\"choices\": [\"value\", \"side effect\"], \"answer\": \"value\"}, \"Adding two numbers\": {\"choices\": [\"value\", \"side effect\"], \"answer\": \"value\"}, \"A function which prints to the console\": {\"choices\": [\"value\", \"side effect\"], \"answer\": \"side effect\"}, \"Fetching the current temperature from an API\": {\"choices\": [\"value\", \"side effect\"], \"answer\": \"value\"}, \"A function which sorts a list in place\": {\"choices\": [\"value\", \"side effect\"], \"answer\": \"side effect\"}, \"Getting a model score for a set of inputs\": {\"choices\": [\"value\", \"side effect\"], \"answer\": \"value\"}, \"Deploying a model to a hosting service\": {\"choices\": [\"value\", \"side effect\"], \"answer\": \"side effect\"}}\n\n\n\n\nExercise\nIt’s often a good idea to allow users of your application to reset input values to their initial state. Take this simple application and add a ui.action_button which resets the slider.\n\n\n\n\n\n\nTip\n\n\n\nYou should probably use one of the ui.update_* functions listed in the documentation\n\n\n\n\nGoalProblemSolution\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\n\n\n\n#| standalone: true\n#| components: [viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.input_action_button(\"reset\", \"Reset Slider\"),\n    ui.output_data_frame(\"table\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.data_frame\n    def table():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        summary = (\n            filtered.set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @reactive.Effect\n    @reactive.event(input.reset)\n    def _reset_slider():\n        ui.update_slider(\"mass\", value=6000)\n\n\napp = App(app_ui, server)\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui\nimport pandas as pd\nfrom pathlib import Path\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_data_frame(\"table\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.data_frame\n    def table():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        summary = (\n            filtered.set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n\napp = App(app_ui, server)\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.input_action_button(\"reset\", \"Reset Slider\"),\n    ui.output_data_frame(\"table\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.data_frame\n    def table():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        summary = (\n            filtered.set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @reactive.Effect\n    @reactive.event(input.reset)\n    def _reset_slider():\n        ui.update_slider(\"mass\", value=6000)\n\n\napp = App(app_ui, server)\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Shiny for Python Workshop",
    "section": "",
    "text": "This is the workshop website for the Shiny for Python Workshop at the 2023 Posit Conference. While most of these materials are designed to be used in conjunction with the workshop, they also stand alone as an educational resource. If you have questions or comments, please raise a Github issue, and if you would like to attend the in-person workshop, please register today.\nIf you would like help hosting a Shiny for Python workshop of your own or would like to book a webinar, please contact us on Discord."
  },
  {
    "objectID": "index.html#shinylive",
    "href": "index.html#shinylive",
    "title": "Shiny for Python Workshop",
    "section": "1) Shinylive",
    "text": "1) Shinylive\nShinylive allows you to run full-featured shiny apps in your browser, and includes a basic editor which is good enough to run examples. As a result you should be able to work through all of the examples in the workshop using just the browser without installing anything locally."
  },
  {
    "objectID": "index.html#locally-with-vs-code",
    "href": "index.html#locally-with-vs-code",
    "title": "Shiny for Python Workshop",
    "section": "2) Locally with VS Code",
    "text": "2) Locally with VS Code\nWhile Shinylive is great, it likely isn’t the environment you’ll use to develop Shiny apps, and so it makes sense to set up VS Code and run the examples locally. To do this follow these steps before the workshop:\n\nInstall VS Code\nInstall the Shiny for Python VS Code extension\nClone the repository with git clone https://github.com/rstudio/shiny-python-workshop-2023.git, or alternately download the repository as a zip file:\n\nNavigate to the project directory and create a new virtual environment with python3 -m venv .vevn\nSet your python interpreter to the virtual environment with CMD + SHIFT + P &gt; Select Interpreter\nOpen a new terminal prompt, which should switch to (.venv)\nInstall the relevant packages with pip install -r requirements.txt\n\nAll of the example apps are stored in the /apps directory. The examples are in apps/examples and the problem sets are in apps/problem-sets. If you’ve installed the VS Code extention can run any of the apps by opening the app.py file and clicking the play button in the top right. Alternately, run them from the command line with shiny run &lt;path-to-app.py&gt; --reload."
  },
  {
    "objectID": "reactivity.html",
    "href": "reactivity.html",
    "title": "Basic Reactivity",
    "section": "",
    "text": "In the last section we built a simple shiny app which allowed the user to filter a dataframe and display two plots. One thing you might notice about the code which generated this application is that while we specify what should happen in response to a user’s action, we don’t actually specify when it should happen. We don’t have anything like callback functions which define when a calculation should be run, so how does Shiny know when to run the code to keep everything up to date?\nShiny is different from many other frameworks because it is declarative. Instead of specifying when code should run, you specify recipes for creating the output you want to run, and then leave it up to Shiny to figure out when to rerun them. This greatly simplifies application develpment because managing interaction is the most difficult part of web development, and for the most part Shiny will do a good job managing interaction. Shiny does this by inferring a reactive computation graph (a graph of what depends on what) for your application and rerendering downstream elements only if the upstream elements change.\nThis pattern leads to two main benefits for Shiny users:\n\nThe Shiny UI renders extremely efficiently\nYou do not need to explicitly tell Shiny when to rerender things\n\nLet’s draw the reactive graph for the application from the previous lesson. This app has two inputs, and three outputs, but the checkbox to add a trendline is only used by one of the outputs.\nFor the purposes of this course, we’ll put the computation graphs to the right of the app. We will use rectangles to describe inputs and circles to describe outputs.\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_data_frame(\"table\"),\n    ui.output_plot(\"dist\"),\n    ui.input_checkbox(\"trend\", \"Add trendline\"),\n    ui.output_plot(\"scatter\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.data_frame\n    def table():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        summary = (\n            filtered.set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return dist_plot(filtered)\n\n    @output\n    @render.plot\n    def scatter():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return scatter_plot(filtered, input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\nflowchart TD\n  C[Checkbox] --&gt; Sc((Scatter\\nPlot))\n  Sl --&gt; Sc \n  Sl --&gt; M((Dist Plot))\n  Sl[Slider] --&gt; T((Table))"
  },
  {
    "objectID": "reactivity.html#exercise-2.2",
    "href": "reactivity.html#exercise-2.2",
    "title": "Basic Reactivity",
    "section": "Exercise 2.2",
    "text": "Exercise 2.2\nWe’ve made some changes to the penguins app and included an artificially slow bootstrap sampling method. Currently all three elemenets in the app call the slow sampling function, which causes the app to slow down (you can interact with the goal app and the problem app to experience this sluggishness).\nExtract reactive calculations from this app to reduce repetition and speed up the app. There are several good solutions to this problem, but the majority of people end up with two reactive calculations.\n\n\nGoalProblemSolution\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\n\n\n\n#| standalone: true\n#| components: [viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_numeric(\"sample\", \"Sample Size\", value=100),\n    ui.output_plot(\"mass_plot\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_text(\"row_count\"),\n    ui.input_selectize(\n        \"columns\",\n        \"Columns\",\n        choices=penguins.columns.tolist(),\n        selected=[\"species\", \"island\"],\n        multiple=True,\n    ),\n    ui.output_data_frame(\"species_summary\"),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def sampled_df():\n        return sample_data(penguins.copy(), input.sample())\n\n    @reactive.Calc\n    def filtered_df():\n        df = sampled_df()\n        return df.loc[df[\"body_mass\"] &lt; input.mass()]\n\n    @output\n    @render.plot\n    def mass_plot():\n        return dist_plot(sampled_df())\n\n    @output\n    @render.text\n    def row_count():\n        return f\"{filtered_df().shape[0]} rows in filtered sample\"\n\n    @output\n    @render.data_frame\n    def species_summary():\n        return filtered_df()[list(input.columns())]\n\n\napp = App(app_ui, server)\n\n\ndef sample_data(data: pd.DataFrame, n: int) -&gt; pd.DataFrame:\n    # This loop is here to simulate a lengthy computation\n    # pyodide does not support time.sleep() so this is the\n    # workaround.\n    for i in range(10000):\n        out = data.sample(n, replace=True)\n    return out\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: sample\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_numeric(\"sample\", \"Sample Size\", value=100),\n    ui.output_plot(\"mass_plot\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_text(\"row_count\"),\n    ui.input_selectize(\n        \"columns\",\n        \"Columns\",\n        choices=penguins.columns.tolist(),\n        selected=[\"species\", \"island\"],\n        multiple=True,\n    ),\n    ui.output_data_frame(\"species_summary\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.plot\n    def mass_plot():\n        df = sample_data(penguins.copy(), input.sample())\n        return dist_plot(df)\n\n    @output\n    @render.text\n    def row_count():\n        df = sample_data(penguins.copy(), input.sample())\n        df = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return f\"{df.shape[0]} rows in filtered sample\"\n\n    @output\n    @render.data_frame\n    def species_summary():\n        df = sample_data(penguins.copy(), input.sample())\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered[list(input.columns())]\n\n\napp = App(app_ui, server)\n\n\ndef sample_data(data: pd.DataFrame, n: int) -&gt; pd.DataFrame:\n    # This loop is here to simulate a lengthy computation\n    # pyodide does not support time.sleep() so this is the\n    # workaround.\n    for i in range(10000):\n        out = data.sample(n, replace=True)\n    return out\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: sample\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_numeric(\"sample\", \"Sample Size\", value=100),\n    ui.output_plot(\"mass_plot\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_text(\"row_count\"),\n    ui.input_selectize(\n        \"columns\",\n        \"Columns\",\n        choices=penguins.columns.tolist(),\n        selected=[\"species\", \"island\"],\n        multiple=True,\n    ),\n    ui.output_data_frame(\"species_summary\"),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def sampled_df():\n        return sample_data(penguins.copy(), input.sample())\n\n    @reactive.Calc\n    def filtered_df():\n        df = sampled_df()\n        return df.loc[df[\"body_mass\"] &lt; input.mass()]\n\n    @output\n    @render.plot\n    def mass_plot():\n        return dist_plot(sampled_df())\n\n    @output\n    @render.text\n    def row_count():\n        return f\"{filtered_df().shape[0]} rows in filtered sample\"\n\n    @output\n    @render.data_frame\n    def species_summary():\n        return filtered_df()[list(input.columns())]\n\n\napp = App(app_ui, server)\n\n\ndef sample_data(data: pd.DataFrame, n: int) -&gt; pd.DataFrame:\n    # This loop is here to simulate a lengthy computation\n    # pyodide does not support time.sleep() so this is the\n    # workaround.\n    for i in range(10000):\n        out = data.sample(n, replace=True)\n    return out\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: sample\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n:::"
  },
  {
    "objectID": "getting-started.html",
    "href": "getting-started.html",
    "title": "Getting started",
    "section": "",
    "text": "The goal of this section is to learn what you need to do to stand up a Shiny application. Don’t worry if you don’t really understand how the framework works, or why it’s designed in a particular way. All we’re trying to do at this stage is to get something working, and become comfortable with the development pattern."
  },
  {
    "objectID": "getting-started.html#add-an-input",
    "href": "getting-started.html#add-an-input",
    "title": "Getting started",
    "section": "Add an input",
    "text": "Add an input\nIn order to create an interactive app, we need to add an input which the user can manipulate. Let’s add a ui.input_slider widget which let the user select the minimum body mass to include in the table. To do this we need to do two things:\n\nAdd the ui.input_slider function to the ui code\nUse the value of that code in the rendering function which generates the table.\n\n\n\n\n\n\n\nWarning\n\n\n\nBe careful of mutability when manipulating objects in a data frame. Use .copy to make sure that you’re not changing the original object.\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui\nimport pandas as pd\nfrom pathlib import Path\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_data_frame(\"table\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.data_frame\n    def table():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        summary = (\n            filtered.set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n\napp = App(app_ui, server)\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009"
  },
  {
    "objectID": "getting-started.html#add-a-plot",
    "href": "getting-started.html#add-a-plot",
    "title": "Getting started",
    "section": "Add a plot",
    "text": "Add a plot\nWe can add a plot to the app in the same way that we added a table. The steps are: 1) Add ui.output_plot() to the ui 2) Add a function whose name matches the id of the output 3) Decorate that function with @output and @reactive.plot\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_data_frame(\"table\"),\n    ui.output_plot(\"dist\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.data_frame\n    def table():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        summary = (\n            filtered.set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return dist_plot(filtered)\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\nGoalProblemSolution\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\nAdd a second plot output to the apps which shows a scatter plot of Bill Depth to Bill Length, there’s a plotting function in plots.py which provides one implementation.\nAdd a checkbox which adds a line of best fit to the plot.\n\n\n\n\n#| standalone: true\n#| components: [viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_data_frame(\"table\"),\n    ui.output_plot(\"dist\"),\n    ui.input_checkbox(\"trend\", \"Add trendline\"),\n    ui.output_plot(\"scatter\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.data_frame\n    def table():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        summary = (\n            filtered.set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return dist_plot(filtered)\n\n    @output\n    @render.plot\n    def scatter():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return scatter_plot(filtered, input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\nAdd a second plot output to the apps which shows a scatter plot of Bill Depth to Bill Length, there’s a plotting function in plots.py which provides one implementation.\nAdd a checkbox which adds a line of best fit to the plot.\n\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_data_frame(\"table\"),\n    ui.output_plot(\"dist\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.data_frame\n    def table():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        summary = (\n            filtered.set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return dist_plot(filtered)\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\nAdd a second plot output to the apps which shows a scatter plot of Bill Depth to Bill Length, there’s a plotting function in plots.py which provides one implementation.\nAdd a checkbox which adds a line of best fit to the plot.\n\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_data_frame(\"table\"),\n    ui.output_plot(\"dist\"),\n    ui.input_checkbox(\"trend\", \"Add trendline\"),\n    ui.output_plot(\"scatter\"),\n)\n\n\ndef server(input, output, session):\n    @output\n    @render.data_frame\n    def table():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        summary = (\n            filtered.set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return dist_plot(filtered)\n\n    @output\n    @render.plot\n    def scatter():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return scatter_plot(filtered, input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009"
  },
  {
    "objectID": "ui-customization.html",
    "href": "ui-customization.html",
    "title": "UI customization",
    "section": "",
    "text": "In the previous sections you built a functional shiny app, and developed some intution about how reactive programming works, but the app itself isn’t laid out very well. In this section we will explore the basics of how to customize the layout of your shiny application to make it more intuitive and attractive.\nUp until this point all of our UI code has looked like this, with a bunch of ui elements contained by ui.page_fluid. The ui.page_fluid function is container function that organizes child elements like ui.h2 and ui.output_plot’. You can add as many children as you want to a container function, and they will be laid out one after another.\nWhile this is a great way to get started, it produes a somewhat confusing user interface. Since each new element is appended at the bottom of the page, it can be difficult for a user to quickly see which inputs they can change. In order to help you build more inutive user interfaces, Shiny has a few additional container functions which you can compose to build almost any layout you want.\nTo start with let’s take a look at ui.layout_sidebar() which breaks your app up into a sidebar and a main panel.\nThere are a couple of things to unpack about this code. First we have the page_fluid function which defines how the top-level page should behave in the browser. The page_fluid function is a good default because it’ll make your app respond to browser resizes. Second, we have the layout_sidebar function which lays ui.panel_sidebar and ui.panel_main side-by-side. You can add child elements to the panels by passing them as arguments to the two panel functions in the same way that you did for the basic app:\nGive this a try by reorganizing your app into a sidebar layout."
  },
  {
    "objectID": "ui-customization.html#problem-4.0-add-a-sidebar",
    "href": "ui-customization.html#problem-4.0-add-a-sidebar",
    "title": "UI customization",
    "section": "Problem 4.0, add a sidebar",
    "text": "Problem 4.0, add a sidebar\n\n\nGoalProblemSolution\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\nModify your existing app to put the inputs in a sidebar, and your outputs in the main panel. Note that you’ll need to change the sidebar width to match the answer app.\n\n\n\n#| standalone: true\n#| components: [viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.output_data_frame(\"table\"),\n            ui.output_plot(\"dist\"),\n            ui.output_plot(\"scatter\"),\n        ),\n    )\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.data_frame\n    def table():\n        summary = (\n            filt_df()\n            .set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\nModify your existing app to put the inputs in a sidebar, and your outputs in the main panel. Note that you’ll need to change the sidebar width to match the answer app.\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_data_frame(\"table\"),\n    ui.output_plot(\"dist\"),\n    ui.input_checkbox(\"trend\", \"Add trendline\"),\n    ui.output_plot(\"scatter\"),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.data_frame\n    def table():\n        summary = (\n            filt_df()\n            .set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\nModify your existing app to put the inputs in a sidebar, and your outputs in the main panel. Note that you’ll need to change the sidebar width to match the answer app.\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.output_data_frame(\"table\"),\n            ui.output_plot(\"dist\"),\n            ui.output_plot(\"scatter\"),\n        ),\n    )\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.data_frame\n    def table():\n        summary = (\n            filt_df()\n            .set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009"
  },
  {
    "objectID": "ui-customization.html#the-bootstrap-grid",
    "href": "ui-customization.html#the-bootstrap-grid",
    "title": "UI customization",
    "section": "The bootstrap grid",
    "text": "The bootstrap grid\nShiny uses the bootstrap grid system to layout content in rows and columns, and it’s important to understand the bootstrap grid system in order to implement custom Shiny layouts. Bootstrap divides the available screen real estate into 12 vertical sections, and allows you to specify how many sections each element takes up. When you call ui.column(4) you are saying that this column should always 4/12 vertical sections, or 1/3 of the available real estate on the screen. The reason there are 12 columns is that it’s a number which can easily be divided into 2, 3, 4, or 6 equal sections, so it’s fairly easy to create common divisions. The width of a child column is specified relative to the width of its parent. For example if we have two top-level columns with width=6, and three nested columns with width=4, each nested column will take up 1/6th (6/12 * 4/12) of the overall screen. The top level column divides the screen in half, and the nested column divides the top level column in half.\nThe power of this layout system is that since your column widths are always defined relative to the overall screen size, they will look good on different sized screns, or when the user resizes the window."
  },
  {
    "objectID": "ui-customization.html#problem-4.1-add-rows-and-columns",
    "href": "ui-customization.html#problem-4.1-add-rows-and-columns",
    "title": "UI customization",
    "section": "Problem 4.1 add rows and columns",
    "text": "Problem 4.1 add rows and columns\n\n\nGoalProblemSolution\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\nArrange the main panel of your app into rows and columns.\n\n\n\n#| standalone: true\n#| components: [viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.output_data_frame(\"table\"),\n            ui.output_plot(\"dist\"),\n            ui.output_plot(\"scatter\"),\n        ),\n    )\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.data_frame\n    def table():\n        summary = (\n            filt_df()\n            .set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\nArrange the main panel of your app into rows and columns.\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.h2(\"Hello Penguins!\"),\n    ui.input_slider(\n        \"mass\",\n        \"Mass\",\n        2000,\n        8000,\n        6000,\n    ),\n    ui.output_data_frame(\"table\"),\n    ui.output_plot(\"dist\"),\n    ui.input_checkbox(\"trend\", \"Add trendline\"),\n    ui.output_plot(\"scatter\"),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.data_frame\n    def table():\n        summary = (\n            filt_df()\n            .set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\nArrange the main panel of your app into rows and columns.\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.output_data_frame(\"table\"),\n            ui.output_plot(\"dist\"),\n            ui.output_plot(\"scatter\"),\n        ),\n    )\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df():\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.data_frame\n    def table():\n        summary = (\n            filt_df()\n            .set_index(\"species\")\n            .groupby(level=\"species\")\n            .agg({\"bill_length\": \"mean\", \"bill_depth\": \"mean\"})\n            .reset_index()\n        )\n        return summary\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009"
  },
  {
    "objectID": "ui-customization.html#exercise-4.2",
    "href": "ui-customization.html#exercise-4.2",
    "title": "UI customization",
    "section": "Exercise 4.2",
    "text": "Exercise 4.2\n\n\nGoalProblemSolution\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\nUse the function make_value_boxes to add thre value boxes which show the counts of each penguin. Note that there is a ui.layout_column_wrap in the experimental module that can help with displaying a list of ui elements.\n\n\n\n#| standalone: true\n#| components: [viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\nfrom boxes import make_value_box\nimport shiny.experimental as x\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.panel_title(\"Penguins Dashboard\"),\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.row(ui.output_ui(\"boxes\")),\n            ui.row(\n                ui.column(8, ui.output_plot(\"dist\")),\n                ui.column(4, ui.output_plot(\"scatter\")),\n            ),\n        ),\n    ),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df() -&gt; pd.DataFrame:\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.ui\n    def boxes():\n        species_count = filt_df().groupby([\"species\"])[\"species\"].count()\n        box_list = []\n\n        for index, value in species_count.items():\n            box_list.append(make_value_box(index, value))\n\n        return x.ui.layout_column_wrap(1 / len(box_list), *box_list)\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: boxes.py\nimport shiny.experimental as x\nfrom shiny import ui\n\n\ndef make_value_box(title: str, value: float):\n    return x.ui.value_box(title, value.__round__(2))\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\nUse the function make_value_boxes to add thre value boxes which show the counts of each penguin. Note that there is a ui.layout_column_wrap in the experimental module that can help with displaying a list of ui elements.\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\nfrom boxes import make_value_box\nimport shiny.experimental as x\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.panel_title(\"Penguins Dashboard\"),\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.row(),  # Boxes go here\n            ui.row(\n                ui.column(8, ui.output_plot(\"dist\")),\n                ui.column(4, ui.output_plot(\"scatter\")),\n            ),\n        ),\n    ),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df() -&gt; pd.DataFrame:\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: boxes.py\nimport shiny.experimental as x\nfrom shiny import ui\n\n\ndef make_value_box(title: str, value: float):\n    return x.ui.value_box(title, value.__round__(2))\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\nUse the function make_value_boxes to add thre value boxes which show the counts of each penguin. Note that there is a ui.layout_column_wrap in the experimental module that can help with displaying a list of ui elements.\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\nfrom boxes import make_value_box\nimport shiny.experimental as x\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    ui.panel_title(\"Penguins Dashboard\"),\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.row(ui.output_ui(\"boxes\")),\n            ui.row(\n                ui.column(8, ui.output_plot(\"dist\")),\n                ui.column(4, ui.output_plot(\"scatter\")),\n            ),\n        ),\n    ),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df() -&gt; pd.DataFrame:\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.ui\n    def boxes():\n        species_count = filt_df().groupby([\"species\"])[\"species\"].count()\n        box_list = []\n\n        for index, value in species_count.items():\n            box_list.append(make_value_box(index, value))\n\n        return x.ui.layout_column_wrap(1 / len(box_list), *box_list)\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: boxes.py\nimport shiny.experimental as x\nfrom shiny import ui\n\n\ndef make_value_box(title: str, value: float):\n    return x.ui.value_box(title, value.__round__(2))\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009"
  },
  {
    "objectID": "ui-customization.html#adding-a-style-sheet",
    "href": "ui-customization.html#adding-a-style-sheet",
    "title": "UI customization",
    "section": "Adding a style sheet",
    "text": "Adding a style sheet\nTo add an external style sheet to a shiny app, you should use the ui.include_css() function which picks up an external css sheet and applies it to your application. CSS effectively applies styling paramaters to classes. These parameters modify or add to the parameters which are already applied to a class, which is why it’s a cascading style sheet.\n\nFiguring out what to change\nThe first challenge with customizing your app is figuring out which class to modify. The easiest way to do this is to open your app in Google Chrome and using the inspector. To do this, right-click on the element you want to modify and select “inspect”, this will open up the inspector which will show your app’s HTML markup. For example if you select a row you will see something like this:\n&lt;div class=\"row\"&gt;\n....\n&lt;/div&gt;\nThe thing we’re after is the class=\"row\" which will let us identify that class in css.\n\n\n\n\n\n\nTip\n\n\n\nIf you get lost you can copy markup with copy element and paste it into chatGPT and ask which class you should change.\n\n\n\n\nModifying a class\nTo modify a class you add it to the style.css file. The syntax looks like this:\n.class {\n    parameter: value;\n    parameter: valyue;\n}\nFor example if we wanted to give the rows a pink background we would modify the row class like this:\n.row {\n    background-color: lightpink;\n    border-radius: 10px;\n    padding: 10px;\n}\n\n\nApplying a new class\nIn addition to modifying an existing class, you can also add new classes to your shiny components. This is helpful if, for example, you want to change the style of one row without changing other styles. To add a custom class to an element pass a _class = \"myclass\".\n:::: {.columns width = “50%”} ::: {.column width = “50%”}\n.fancy_column {\n    padding: 10px;\n}\n::: ::: {.column width = “50%”}\nui.column(8, ui.output_plot(\"dist\"), _class=\"fancy_column\")\n::: ::::\n\n\nGoalProblemSolution\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\nGive one of the rows in the app a pink background\nAsk chatGPT for help creating a style and add it to your application\n\n\n\n\n#| standalone: true\n#| components: [viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\nfrom boxes import make_value_box\nimport shiny.experimental as x\nfrom shinyswatch import theme\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    theme.minty(),\n    ui.include_css(Path(__file__).parent / \"www/styles.css\"),\n    ui.panel_title(\"Penguins Dashboard\"),\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.row(ui.output_ui(\"boxes\")),\n            ui.row(\n                {\"class\": \"pink-row\"},\n                ui.column(8, ui.output_plot(\"dist\")),\n                ui.column(4, ui.output_plot(\"scatter\")),\n            ),\n        ),\n    ),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df() -&gt; pd.DataFrame:\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.ui\n    def boxes():\n        species_count = filt_df().groupby([\"species\"])[\"species\"].count()\n        box_list = []\n\n        for index, value in species_count.items():\n            box_list.append(make_value_box(index, value))\n\n        return x.ui.layout_column_wrap(1 / 3, *box_list)\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: www/styles.css\n.pink-row {\n    background-color: lightpink;\n    border-radius: 10px;\n    padding: 10px;\n}\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: requirements.txt\nshinyswatch\n## file: boxes.py\nimport shiny.experimental as x\nfrom shiny import ui\n\n\ndef make_value_box(title: str, value: float):\n    return x.ui.value_box(title, value.__round__(2))\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\nGive one of the rows in the app a pink background\nAsk chatGPT for help creating a style and add it to your application\n\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\nfrom boxes import make_value_box\nimport shiny.experimental as x\nfrom shinyswatch import theme\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    theme.minty(),\n    ui.include_css(Path(__file__).parent / \"www/styles.css\"),\n    ui.panel_title(\"Penguins Dashboard\"),\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.row(ui.output_ui(\"boxes\")),\n            ui.row(\n                ui.column(8, ui.output_plot(\"dist\")),\n                ui.column(4, ui.output_plot(\"scatter\")),\n            ),\n        ),\n    ),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df() -&gt; pd.DataFrame:\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.ui\n    def boxes():\n        species_count = filt_df().groupby([\"species\"])[\"species\"].count()\n        box_list = []\n\n        for index, value in species_count.items():\n            box_list.append(make_value_box(index, value))\n\n        return x.ui.layout_column_wrap(1 / len(box_list), *box_list)\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: www/styles.css\n.pink-row {\n    background-color: lightpink;\n    border-radius: 10px;\n    padding: 10px;\n}\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: requirements.txt\nshinyswatch\n## file: boxes.py\nimport shiny.experimental as x\nfrom shiny import ui\n\n\ndef make_value_box(title: str, value: float):\n    return x.ui.value_box(title, value.__round__(2))\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\n\n\n\nGive one of the rows in the app a pink background\nAsk chatGPT for help creating a style and add it to your application\n\n\n\n\n#| standalone: true\n#| components: [editor, viewer]\n#| layout: horizontal\n#| viewerHeight: 800\nfrom shiny import App, render, ui, reactive\nimport pandas as pd\nfrom pathlib import Path\nfrom plots import dist_plot, scatter_plot\nfrom boxes import make_value_box\nimport shiny.experimental as x\nfrom shinyswatch import theme\n\ninfile = Path(__file__).parent / \"penguins.csv\"\npenguins = pd.read_csv(infile)\n\napp_ui = ui.page_fluid(\n    theme.minty(),\n    ui.include_css(Path(__file__).parent / \"www/styles.css\"),\n    ui.panel_title(\"Penguins Dashboard\"),\n    ui.layout_sidebar(\n        ui.panel_sidebar(\n            ui.input_slider(\n                \"mass\",\n                \"Mass\",\n                2000,\n                8000,\n                6000,\n            ),\n            ui.input_checkbox(\"trend\", \"Add trendline\"),\n            width=3,\n        ),\n        ui.panel_main(\n            ui.row(ui.output_ui(\"boxes\")),\n            ui.row(\n                {\"class\": \"pink-row\"},\n                ui.column(8, ui.output_plot(\"dist\")),\n                ui.column(4, ui.output_plot(\"scatter\")),\n            ),\n        ),\n    ),\n)\n\n\ndef server(input, output, session):\n    @reactive.Calc\n    def filt_df() -&gt; pd.DataFrame:\n        df = penguins.copy()\n        filtered = df.loc[df[\"body_mass\"] &lt; input.mass()]\n        return filtered\n\n    @output\n    @render.ui\n    def boxes():\n        species_count = filt_df().groupby([\"species\"])[\"species\"].count()\n        box_list = []\n\n        for index, value in species_count.items():\n            box_list.append(make_value_box(index, value))\n\n        return x.ui.layout_column_wrap(1 / 3, *box_list)\n\n    @output\n    @render.plot\n    def dist():\n        return dist_plot(filt_df())\n\n    @output\n    @render.plot\n    def scatter():\n        return scatter_plot(filt_df(), input.trend())\n\n\napp = App(app_ui, server)\n\n## file: www/styles.css\n.pink-row {\n    background-color: lightpink;\n    border-radius: 10px;\n    padding: 10px;\n}\n## file: plots.py\nfrom plotnine import ggplot, geom_density, aes, theme_light, geom_point, stat_smooth\n\n\ndef dist_plot(df):\n    plot = (\n        ggplot(df, aes(x=\"body_mass\", fill=\"species\"))\n        + geom_density(alpha=0.2)\n        + theme_light()\n    )\n    return plot\n\n\ndef scatter_plot(df, smoother=False):\n    plot = (\n        ggplot(\n            df,\n            aes(\n                x=\"bill_length\",\n                y=\"bill_depth\",\n                color=\"species\",\n                group=\"species\",\n            ),\n        )\n        + geom_point()\n        + theme_light()\n    )\n\n    if smoother:\n        plot = plot + stat_smooth()\n\n    return plot\n\n## file: requirements.txt\nshinyswatch\n## file: boxes.py\nimport shiny.experimental as x\nfrom shiny import ui\n\n\ndef make_value_box(title: str, value: float):\n    return x.ui.value_box(title, value.__round__(2))\n\n## file: penguins.csv\nspecies,island,bill_length,bill_depth,flipper_length,body_mass,sex,year\nAdelie,Torgersen,39.1,18.7,181,3750,male,2007\nAdelie,Torgersen,39.5,17.4,186,3800,female,2007\nAdelie,Torgersen,40.3,18,195,3250,female,2007\nAdelie,Torgersen,NA,NA,NA,NA,NA,2007\nAdelie,Torgersen,36.7,19.3,193,3450,female,2007\nAdelie,Torgersen,39.3,20.6,190,3650,male,2007\nAdelie,Torgersen,38.9,17.8,181,3625,female,2007\nAdelie,Torgersen,39.2,19.6,195,4675,male,2007\nAdelie,Torgersen,34.1,18.1,193,3475,NA,2007\nAdelie,Torgersen,42,20.2,190,4250,NA,2007\nAdelie,Torgersen,37.8,17.1,186,3300,NA,2007\nAdelie,Torgersen,37.8,17.3,180,3700,NA,2007\nAdelie,Torgersen,41.1,17.6,182,3200,female,2007\nAdelie,Torgersen,38.6,21.2,191,3800,male,2007\nAdelie,Torgersen,34.6,21.1,198,4400,male,2007\nAdelie,Torgersen,36.6,17.8,185,3700,female,2007\nAdelie,Torgersen,38.7,19,195,3450,female,2007\nAdelie,Torgersen,42.5,20.7,197,4500,male,2007\nAdelie,Torgersen,34.4,18.4,184,3325,female,2007\nAdelie,Torgersen,46,21.5,194,4200,male,2007\nAdelie,Biscoe,37.8,18.3,174,3400,female,2007\nAdelie,Biscoe,37.7,18.7,180,3600,male,2007\nAdelie,Biscoe,35.9,19.2,189,3800,female,2007\nAdelie,Biscoe,38.2,18.1,185,3950,male,2007\nAdelie,Biscoe,38.8,17.2,180,3800,male,2007\nAdelie,Biscoe,35.3,18.9,187,3800,female,2007\nAdelie,Biscoe,40.6,18.6,183,3550,male,2007\nAdelie,Biscoe,40.5,17.9,187,3200,female,2007\nAdelie,Biscoe,37.9,18.6,172,3150,female,2007\nAdelie,Biscoe,40.5,18.9,180,3950,male,2007\nAdelie,Dream,39.5,16.7,178,3250,female,2007\nAdelie,Dream,37.2,18.1,178,3900,male,2007\nAdelie,Dream,39.5,17.8,188,3300,female,2007\nAdelie,Dream,40.9,18.9,184,3900,male,2007\nAdelie,Dream,36.4,17,195,3325,female,2007\nAdelie,Dream,39.2,21.1,196,4150,male,2007\nAdelie,Dream,38.8,20,190,3950,male,2007\nAdelie,Dream,42.2,18.5,180,3550,female,2007\nAdelie,Dream,37.6,19.3,181,3300,female,2007\nAdelie,Dream,39.8,19.1,184,4650,male,2007\nAdelie,Dream,36.5,18,182,3150,female,2007\nAdelie,Dream,40.8,18.4,195,3900,male,2007\nAdelie,Dream,36,18.5,186,3100,female,2007\nAdelie,Dream,44.1,19.7,196,4400,male,2007\nAdelie,Dream,37,16.9,185,3000,female,2007\nAdelie,Dream,39.6,18.8,190,4600,male,2007\nAdelie,Dream,41.1,19,182,3425,male,2007\nAdelie,Dream,37.5,18.9,179,2975,NA,2007\nAdelie,Dream,36,17.9,190,3450,female,2007\nAdelie,Dream,42.3,21.2,191,4150,male,2007\nAdelie,Biscoe,39.6,17.7,186,3500,female,2008\nAdelie,Biscoe,40.1,18.9,188,4300,male,2008\nAdelie,Biscoe,35,17.9,190,3450,female,2008\nAdelie,Biscoe,42,19.5,200,4050,male,2008\nAdelie,Biscoe,34.5,18.1,187,2900,female,2008\nAdelie,Biscoe,41.4,18.6,191,3700,male,2008\nAdelie,Biscoe,39,17.5,186,3550,female,2008\nAdelie,Biscoe,40.6,18.8,193,3800,male,2008\nAdelie,Biscoe,36.5,16.6,181,2850,female,2008\nAdelie,Biscoe,37.6,19.1,194,3750,male,2008\nAdelie,Biscoe,35.7,16.9,185,3150,female,2008\nAdelie,Biscoe,41.3,21.1,195,4400,male,2008\nAdelie,Biscoe,37.6,17,185,3600,female,2008\nAdelie,Biscoe,41.1,18.2,192,4050,male,2008\nAdelie,Biscoe,36.4,17.1,184,2850,female,2008\nAdelie,Biscoe,41.6,18,192,3950,male,2008\nAdelie,Biscoe,35.5,16.2,195,3350,female,2008\nAdelie,Biscoe,41.1,19.1,188,4100,male,2008\nAdelie,Torgersen,35.9,16.6,190,3050,female,2008\nAdelie,Torgersen,41.8,19.4,198,4450,male,2008\nAdelie,Torgersen,33.5,19,190,3600,female,2008\nAdelie,Torgersen,39.7,18.4,190,3900,male,2008\nAdelie,Torgersen,39.6,17.2,196,3550,female,2008\nAdelie,Torgersen,45.8,18.9,197,4150,male,2008\nAdelie,Torgersen,35.5,17.5,190,3700,female,2008\nAdelie,Torgersen,42.8,18.5,195,4250,male,2008\nAdelie,Torgersen,40.9,16.8,191,3700,female,2008\nAdelie,Torgersen,37.2,19.4,184,3900,male,2008\nAdelie,Torgersen,36.2,16.1,187,3550,female,2008\nAdelie,Torgersen,42.1,19.1,195,4000,male,2008\nAdelie,Torgersen,34.6,17.2,189,3200,female,2008\nAdelie,Torgersen,42.9,17.6,196,4700,male,2008\nAdelie,Torgersen,36.7,18.8,187,3800,female,2008\nAdelie,Torgersen,35.1,19.4,193,4200,male,2008\nAdelie,Dream,37.3,17.8,191,3350,female,2008\nAdelie,Dream,41.3,20.3,194,3550,male,2008\nAdelie,Dream,36.3,19.5,190,3800,male,2008\nAdelie,Dream,36.9,18.6,189,3500,female,2008\nAdelie,Dream,38.3,19.2,189,3950,male,2008\nAdelie,Dream,38.9,18.8,190,3600,female,2008\nAdelie,Dream,35.7,18,202,3550,female,2008\nAdelie,Dream,41.1,18.1,205,4300,male,2008\nAdelie,Dream,34,17.1,185,3400,female,2008\nAdelie,Dream,39.6,18.1,186,4450,male,2008\nAdelie,Dream,36.2,17.3,187,3300,female,2008\nAdelie,Dream,40.8,18.9,208,4300,male,2008\nAdelie,Dream,38.1,18.6,190,3700,female,2008\nAdelie,Dream,40.3,18.5,196,4350,male,2008\nAdelie,Dream,33.1,16.1,178,2900,female,2008\nAdelie,Dream,43.2,18.5,192,4100,male,2008\nAdelie,Biscoe,35,17.9,192,3725,female,2009\nAdelie,Biscoe,41,20,203,4725,male,2009\nAdelie,Biscoe,37.7,16,183,3075,female,2009\nAdelie,Biscoe,37.8,20,190,4250,male,2009\nAdelie,Biscoe,37.9,18.6,193,2925,female,2009\nAdelie,Biscoe,39.7,18.9,184,3550,male,2009\nAdelie,Biscoe,38.6,17.2,199,3750,female,2009\nAdelie,Biscoe,38.2,20,190,3900,male,2009\nAdelie,Biscoe,38.1,17,181,3175,female,2009\nAdelie,Biscoe,43.2,19,197,4775,male,2009\nAdelie,Biscoe,38.1,16.5,198,3825,female,2009\nAdelie,Biscoe,45.6,20.3,191,4600,male,2009\nAdelie,Biscoe,39.7,17.7,193,3200,female,2009\nAdelie,Biscoe,42.2,19.5,197,4275,male,2009\nAdelie,Biscoe,39.6,20.7,191,3900,female,2009\nAdelie,Biscoe,42.7,18.3,196,4075,male,2009\nAdelie,Torgersen,38.6,17,188,2900,female,2009\nAdelie,Torgersen,37.3,20.5,199,3775,male,2009\nAdelie,Torgersen,35.7,17,189,3350,female,2009\nAdelie,Torgersen,41.1,18.6,189,3325,male,2009\nAdelie,Torgersen,36.2,17.2,187,3150,female,2009\nAdelie,Torgersen,37.7,19.8,198,3500,male,2009\nAdelie,Torgersen,40.2,17,176,3450,female,2009\nAdelie,Torgersen,41.4,18.5,202,3875,male,2009\nAdelie,Torgersen,35.2,15.9,186,3050,female,2009\nAdelie,Torgersen,40.6,19,199,4000,male,2009\nAdelie,Torgersen,38.8,17.6,191,3275,female,2009\nAdelie,Torgersen,41.5,18.3,195,4300,male,2009\nAdelie,Torgersen,39,17.1,191,3050,female,2009\nAdelie,Torgersen,44.1,18,210,4000,male,2009\nAdelie,Torgersen,38.5,17.9,190,3325,female,2009\nAdelie,Torgersen,43.1,19.2,197,3500,male,2009\nAdelie,Dream,36.8,18.5,193,3500,female,2009\nAdelie,Dream,37.5,18.5,199,4475,male,2009\nAdelie,Dream,38.1,17.6,187,3425,female,2009\nAdelie,Dream,41.1,17.5,190,3900,male,2009\nAdelie,Dream,35.6,17.5,191,3175,female,2009\nAdelie,Dream,40.2,20.1,200,3975,male,2009\nAdelie,Dream,37,16.5,185,3400,female,2009\nAdelie,Dream,39.7,17.9,193,4250,male,2009\nAdelie,Dream,40.2,17.1,193,3400,female,2009\nAdelie,Dream,40.6,17.2,187,3475,male,2009\nAdelie,Dream,32.1,15.5,188,3050,female,2009\nAdelie,Dream,40.7,17,190,3725,male,2009\nAdelie,Dream,37.3,16.8,192,3000,female,2009\nAdelie,Dream,39,18.7,185,3650,male,2009\nAdelie,Dream,39.2,18.6,190,4250,male,2009\nAdelie,Dream,36.6,18.4,184,3475,female,2009\nAdelie,Dream,36,17.8,195,3450,female,2009\nAdelie,Dream,37.8,18.1,193,3750,male,2009\nAdelie,Dream,36,17.1,187,3700,female,2009\nAdelie,Dream,41.5,18.5,201,4000,male,2009\nGentoo,Biscoe,46.1,13.2,211,4500,female,2007\nGentoo,Biscoe,50,16.3,230,5700,male,2007\nGentoo,Biscoe,48.7,14.1,210,4450,female,2007\nGentoo,Biscoe,50,15.2,218,5700,male,2007\nGentoo,Biscoe,47.6,14.5,215,5400,male,2007\nGentoo,Biscoe,46.5,13.5,210,4550,female,2007\nGentoo,Biscoe,45.4,14.6,211,4800,female,2007\nGentoo,Biscoe,46.7,15.3,219,5200,male,2007\nGentoo,Biscoe,43.3,13.4,209,4400,female,2007\nGentoo,Biscoe,46.8,15.4,215,5150,male,2007\nGentoo,Biscoe,40.9,13.7,214,4650,female,2007\nGentoo,Biscoe,49,16.1,216,5550,male,2007\nGentoo,Biscoe,45.5,13.7,214,4650,female,2007\nGentoo,Biscoe,48.4,14.6,213,5850,male,2007\nGentoo,Biscoe,45.8,14.6,210,4200,female,2007\nGentoo,Biscoe,49.3,15.7,217,5850,male,2007\nGentoo,Biscoe,42,13.5,210,4150,female,2007\nGentoo,Biscoe,49.2,15.2,221,6300,male,2007\nGentoo,Biscoe,46.2,14.5,209,4800,female,2007\nGentoo,Biscoe,48.7,15.1,222,5350,male,2007\nGentoo,Biscoe,50.2,14.3,218,5700,male,2007\nGentoo,Biscoe,45.1,14.5,215,5000,female,2007\nGentoo,Biscoe,46.5,14.5,213,4400,female,2007\nGentoo,Biscoe,46.3,15.8,215,5050,male,2007\nGentoo,Biscoe,42.9,13.1,215,5000,female,2007\nGentoo,Biscoe,46.1,15.1,215,5100,male,2007\nGentoo,Biscoe,44.5,14.3,216,4100,NA,2007\nGentoo,Biscoe,47.8,15,215,5650,male,2007\nGentoo,Biscoe,48.2,14.3,210,4600,female,2007\nGentoo,Biscoe,50,15.3,220,5550,male,2007\nGentoo,Biscoe,47.3,15.3,222,5250,male,2007\nGentoo,Biscoe,42.8,14.2,209,4700,female,2007\nGentoo,Biscoe,45.1,14.5,207,5050,female,2007\nGentoo,Biscoe,59.6,17,230,6050,male,2007\nGentoo,Biscoe,49.1,14.8,220,5150,female,2008\nGentoo,Biscoe,48.4,16.3,220,5400,male,2008\nGentoo,Biscoe,42.6,13.7,213,4950,female,2008\nGentoo,Biscoe,44.4,17.3,219,5250,male,2008\nGentoo,Biscoe,44,13.6,208,4350,female,2008\nGentoo,Biscoe,48.7,15.7,208,5350,male,2008\nGentoo,Biscoe,42.7,13.7,208,3950,female,2008\nGentoo,Biscoe,49.6,16,225,5700,male,2008\nGentoo,Biscoe,45.3,13.7,210,4300,female,2008\nGentoo,Biscoe,49.6,15,216,4750,male,2008\nGentoo,Biscoe,50.5,15.9,222,5550,male,2008\nGentoo,Biscoe,43.6,13.9,217,4900,female,2008\nGentoo,Biscoe,45.5,13.9,210,4200,female,2008\nGentoo,Biscoe,50.5,15.9,225,5400,male,2008\nGentoo,Biscoe,44.9,13.3,213,5100,female,2008\nGentoo,Biscoe,45.2,15.8,215,5300,male,2008\nGentoo,Biscoe,46.6,14.2,210,4850,female,2008\nGentoo,Biscoe,48.5,14.1,220,5300,male,2008\nGentoo,Biscoe,45.1,14.4,210,4400,female,2008\nGentoo,Biscoe,50.1,15,225,5000,male,2008\nGentoo,Biscoe,46.5,14.4,217,4900,female,2008\nGentoo,Biscoe,45,15.4,220,5050,male,2008\nGentoo,Biscoe,43.8,13.9,208,4300,female,2008\nGentoo,Biscoe,45.5,15,220,5000,male,2008\nGentoo,Biscoe,43.2,14.5,208,4450,female,2008\nGentoo,Biscoe,50.4,15.3,224,5550,male,2008\nGentoo,Biscoe,45.3,13.8,208,4200,female,2008\nGentoo,Biscoe,46.2,14.9,221,5300,male,2008\nGentoo,Biscoe,45.7,13.9,214,4400,female,2008\nGentoo,Biscoe,54.3,15.7,231,5650,male,2008\nGentoo,Biscoe,45.8,14.2,219,4700,female,2008\nGentoo,Biscoe,49.8,16.8,230,5700,male,2008\nGentoo,Biscoe,46.2,14.4,214,4650,NA,2008\nGentoo,Biscoe,49.5,16.2,229,5800,male,2008\nGentoo,Biscoe,43.5,14.2,220,4700,female,2008\nGentoo,Biscoe,50.7,15,223,5550,male,2008\nGentoo,Biscoe,47.7,15,216,4750,female,2008\nGentoo,Biscoe,46.4,15.6,221,5000,male,2008\nGentoo,Biscoe,48.2,15.6,221,5100,male,2008\nGentoo,Biscoe,46.5,14.8,217,5200,female,2008\nGentoo,Biscoe,46.4,15,216,4700,female,2008\nGentoo,Biscoe,48.6,16,230,5800,male,2008\nGentoo,Biscoe,47.5,14.2,209,4600,female,2008\nGentoo,Biscoe,51.1,16.3,220,6000,male,2008\nGentoo,Biscoe,45.2,13.8,215,4750,female,2008\nGentoo,Biscoe,45.2,16.4,223,5950,male,2008\nGentoo,Biscoe,49.1,14.5,212,4625,female,2009\nGentoo,Biscoe,52.5,15.6,221,5450,male,2009\nGentoo,Biscoe,47.4,14.6,212,4725,female,2009\nGentoo,Biscoe,50,15.9,224,5350,male,2009\nGentoo,Biscoe,44.9,13.8,212,4750,female,2009\nGentoo,Biscoe,50.8,17.3,228,5600,male,2009\nGentoo,Biscoe,43.4,14.4,218,4600,female,2009\nGentoo,Biscoe,51.3,14.2,218,5300,male,2009\nGentoo,Biscoe,47.5,14,212,4875,female,2009\nGentoo,Biscoe,52.1,17,230,5550,male,2009\nGentoo,Biscoe,47.5,15,218,4950,female,2009\nGentoo,Biscoe,52.2,17.1,228,5400,male,2009\nGentoo,Biscoe,45.5,14.5,212,4750,female,2009\nGentoo,Biscoe,49.5,16.1,224,5650,male,2009\nGentoo,Biscoe,44.5,14.7,214,4850,female,2009\nGentoo,Biscoe,50.8,15.7,226,5200,male,2009\nGentoo,Biscoe,49.4,15.8,216,4925,male,2009\nGentoo,Biscoe,46.9,14.6,222,4875,female,2009\nGentoo,Biscoe,48.4,14.4,203,4625,female,2009\nGentoo,Biscoe,51.1,16.5,225,5250,male,2009\nGentoo,Biscoe,48.5,15,219,4850,female,2009\nGentoo,Biscoe,55.9,17,228,5600,male,2009\nGentoo,Biscoe,47.2,15.5,215,4975,female,2009\nGentoo,Biscoe,49.1,15,228,5500,male,2009\nGentoo,Biscoe,47.3,13.8,216,4725,NA,2009\nGentoo,Biscoe,46.8,16.1,215,5500,male,2009\nGentoo,Biscoe,41.7,14.7,210,4700,female,2009\nGentoo,Biscoe,53.4,15.8,219,5500,male,2009\nGentoo,Biscoe,43.3,14,208,4575,female,2009\nGentoo,Biscoe,48.1,15.1,209,5500,male,2009\nGentoo,Biscoe,50.5,15.2,216,5000,female,2009\nGentoo,Biscoe,49.8,15.9,229,5950,male,2009\nGentoo,Biscoe,43.5,15.2,213,4650,female,2009\nGentoo,Biscoe,51.5,16.3,230,5500,male,2009\nGentoo,Biscoe,46.2,14.1,217,4375,female,2009\nGentoo,Biscoe,55.1,16,230,5850,male,2009\nGentoo,Biscoe,44.5,15.7,217,4875,NA,2009\nGentoo,Biscoe,48.8,16.2,222,6000,male,2009\nGentoo,Biscoe,47.2,13.7,214,4925,female,2009\nGentoo,Biscoe,NA,NA,NA,NA,NA,2009\nGentoo,Biscoe,46.8,14.3,215,4850,female,2009\nGentoo,Biscoe,50.4,15.7,222,5750,male,2009\nGentoo,Biscoe,45.2,14.8,212,5200,female,2009\nGentoo,Biscoe,49.9,16.1,213,5400,male,2009\nChinstrap,Dream,46.5,17.9,192,3500,female,2007\nChinstrap,Dream,50,19.5,196,3900,male,2007\nChinstrap,Dream,51.3,19.2,193,3650,male,2007\nChinstrap,Dream,45.4,18.7,188,3525,female,2007\nChinstrap,Dream,52.7,19.8,197,3725,male,2007\nChinstrap,Dream,45.2,17.8,198,3950,female,2007\nChinstrap,Dream,46.1,18.2,178,3250,female,2007\nChinstrap,Dream,51.3,18.2,197,3750,male,2007\nChinstrap,Dream,46,18.9,195,4150,female,2007\nChinstrap,Dream,51.3,19.9,198,3700,male,2007\nChinstrap,Dream,46.6,17.8,193,3800,female,2007\nChinstrap,Dream,51.7,20.3,194,3775,male,2007\nChinstrap,Dream,47,17.3,185,3700,female,2007\nChinstrap,Dream,52,18.1,201,4050,male,2007\nChinstrap,Dream,45.9,17.1,190,3575,female,2007\nChinstrap,Dream,50.5,19.6,201,4050,male,2007\nChinstrap,Dream,50.3,20,197,3300,male,2007\nChinstrap,Dream,58,17.8,181,3700,female,2007\nChinstrap,Dream,46.4,18.6,190,3450,female,2007\nChinstrap,Dream,49.2,18.2,195,4400,male,2007\nChinstrap,Dream,42.4,17.3,181,3600,female,2007\nChinstrap,Dream,48.5,17.5,191,3400,male,2007\nChinstrap,Dream,43.2,16.6,187,2900,female,2007\nChinstrap,Dream,50.6,19.4,193,3800,male,2007\nChinstrap,Dream,46.7,17.9,195,3300,female,2007\nChinstrap,Dream,52,19,197,4150,male,2007\nChinstrap,Dream,50.5,18.4,200,3400,female,2008\nChinstrap,Dream,49.5,19,200,3800,male,2008\nChinstrap,Dream,46.4,17.8,191,3700,female,2008\nChinstrap,Dream,52.8,20,205,4550,male,2008\nChinstrap,Dream,40.9,16.6,187,3200,female,2008\nChinstrap,Dream,54.2,20.8,201,4300,male,2008\nChinstrap,Dream,42.5,16.7,187,3350,female,2008\nChinstrap,Dream,51,18.8,203,4100,male,2008\nChinstrap,Dream,49.7,18.6,195,3600,male,2008\nChinstrap,Dream,47.5,16.8,199,3900,female,2008\nChinstrap,Dream,47.6,18.3,195,3850,female,2008\nChinstrap,Dream,52,20.7,210,4800,male,2008\nChinstrap,Dream,46.9,16.6,192,2700,female,2008\nChinstrap,Dream,53.5,19.9,205,4500,male,2008\nChinstrap,Dream,49,19.5,210,3950,male,2008\nChinstrap,Dream,46.2,17.5,187,3650,female,2008\nChinstrap,Dream,50.9,19.1,196,3550,male,2008\nChinstrap,Dream,45.5,17,196,3500,female,2008\nChinstrap,Dream,50.9,17.9,196,3675,female,2009\nChinstrap,Dream,50.8,18.5,201,4450,male,2009\nChinstrap,Dream,50.1,17.9,190,3400,female,2009\nChinstrap,Dream,49,19.6,212,4300,male,2009\nChinstrap,Dream,51.5,18.7,187,3250,male,2009\nChinstrap,Dream,49.8,17.3,198,3675,female,2009\nChinstrap,Dream,48.1,16.4,199,3325,female,2009\nChinstrap,Dream,51.4,19,201,3950,male,2009\nChinstrap,Dream,45.7,17.3,193,3600,female,2009\nChinstrap,Dream,50.7,19.7,203,4050,male,2009\nChinstrap,Dream,42.5,17.3,187,3350,female,2009\nChinstrap,Dream,52.2,18.8,197,3450,male,2009\nChinstrap,Dream,45.2,16.6,191,3250,female,2009\nChinstrap,Dream,49.3,19.9,203,4050,male,2009\nChinstrap,Dream,50.2,18.8,202,3800,male,2009\nChinstrap,Dream,45.6,19.4,194,3525,female,2009\nChinstrap,Dream,51.9,19.5,206,3950,male,2009\nChinstrap,Dream,46.8,16.5,189,3650,female,2009\nChinstrap,Dream,45.7,17,195,3650,female,2009\nChinstrap,Dream,55.8,19.8,207,4000,male,2009\nChinstrap,Dream,43.5,18.1,202,3400,female,2009\nChinstrap,Dream,49.6,18.2,193,3775,male,2009\nChinstrap,Dream,50.8,19,210,4100,male,2009\nChinstrap,Dream,50.2,18.7,198,3775,female,2009"
  }
]